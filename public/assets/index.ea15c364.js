import{j as i,B as C,a as y,u as j,b as B,c as r,M as be,O as ve,T as Se,N as we,I as Ce,d as Ae,e as ye,f as Te,g as Ne,h as Le,r as b,F as u,L as W,S as N,C as E,i as G,k as z,l as Y,m as je,n as xe,o as Ie,p as U,q as Me,s as ke,t as _,v as _e,w as Ee,x as De,R as X,y as T,z as Z,A as ee,D as Oe,E as q,G as R,H as te,J as Pe,K as Fe,P as J,Q as Re,U as Be,V as Ge,W as ze,X as Ve}from"./vendor.f851533e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const $e="/assets/logo.5b151dc7.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function He(){return i("div",{className:"bg-white p-3",children:i(C,{variant:"danger",onClick:()=>{window.localStorage.removeItem("token"),window.location.reload()},children:"Logout"})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/sidebar.ts/sidebarState",y({mode:"EDIT_AMOUNTS",isMobile:!1,isActivated:!1}));V.debugLabel="sidebarState";const ie=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/sidebar.ts/isSidebarVisibleGetter",y(e=>{const{isMobile:t,isActivated:a}=e(V);return t?a:!0}));ie.debugLabel="isSidebarVisibleGetter";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function L(){const[e,t]=j(V),a=B(ie);return{state:e,setIsMobile:d=>t(n=>({...n,isMobile:d})),setSidebarMode:d=>t(n=>({...n,mode:d,isActivated:!0})),isSidebarVisible:a,setSidebarActivity:d=>t(n=>({...n,isActivated:d})),setSidebarState:d=>t(n=>({...n,...d})),toggleShoppingList:()=>{t(d=>({...d,isActivated:!d.isActivated}))}}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/activeShoppingList.ts/activeShoppingListState",y({_id:"",name:"",items:{},status:"active"}));$.debugLabel="activeShoppingListState";const ae=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/activeShoppingList.ts/activeShoppingListLengthGetter",y(e=>{const t=e($);let a=0;for(const c in t.items)a+=t.items[c].length;return a}));ae.debugLabel="activeShoppingListLengthGetter";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function We(){const e=B(ae),{toggleShoppingList:t}=L();return r("div",{className:"m-n1 text-white bg-primary rounded-circle position-relative",children:[i("div",{className:"p-1",onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:i(be,{color:"white"})}),i("div",{className:"position-absolute top-0 start-100 translate-middle rounded-3 px-1 bg-danger",children:i("div",{"data-testid":"shoppingListItemCount",className:"small",children:e})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function F({children:e,tooltip:t,to:a}){return i(ve,{placement:"right",overlay:i(Se,{id:"link-tooltip",children:t}),children:i(we,{to:a,className:({isActive:c})=>`my-4${c?" selected":""}`,children:e})},"nav-link")}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ue(){return r("div",{className:"d-flex flex-column align-items-center justify-content-between py-4 h-100 bg-white",children:[r("div",{className:"p-1 position-relative app-logo",children:[i("img",{src:$e,alt:"logo"}),i("div",{className:"logout position-absolute top-0 start-100",children:i(He,{})})]}),r(Ce.Provider,{value:{color:"black",className:"material-icon"},children:[r("nav",{className:"d-flex flex-column justify-content-between w-100",children:[i(F,{to:"/items",tooltip:"items",children:i(Ae,{})}),i(F,{to:"/history",tooltip:"history",children:i(ye,{})}),i(F,{to:"/stats",tooltip:"stats",children:i(Te,{})})]}),i(We,{})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const M=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/itemsState",y([]));M.debugLabel="itemsState";const se=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/categoriesAndItemsState",y(e=>{const t=new Set,a=e(M);a.forEach(o=>t.add(o.category.name));const c=[];return t.forEach(o=>{c.push([o,a.filter(s=>s.category.name===o)])}),{categories:Array.from(t),itemsGroupedByCategory:c}}));se.debugLabel="categoriesAndItemsState";const oe=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/removeItemFromState",y(null,(e,t,a)=>{const o=e(M).slice(),s=o.findIndex(l=>l._id===a);s>-1&&o.splice(s,1),t(M,o)}));oe.debugLabel="removeItemFromState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function D(){const[e,t]=j(M),a=d=>t(d),c=d=>t(n=>[...n,d]),o=Ne(oe),{categories:s,itemsGroupedByCategory:l}=B(se);return{setItems:a,addNewItem:c,removeItem:o,items:e,findItemsByName:(d,n=5)=>{const h=[];for(const f of e)if(f.name.includes(d)&&h.push(f),h.length>=n)break;return h},categories:s,itemsGroupedByCategory:l}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/notification.ts/notificationState",y({message:"",variant:"info"}));ce.debugLabel="notificationState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function x(){const[e,t]=j(ce);return{setNotification:c=>t(o=>({...o,...c})),state:e}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const qe={Accept:"application/json","Content-Type":"application/json"},Je="http://localhost:5000/api",A=Le.create({baseURL:Je,headers:qe,timeout:8e3});A.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));A.interceptors.response.use(e=>e,e=>{const t=e.config;return e.response.status===401&&!t._retry&&(t._retry=!0),Promise.reject(e.response.data)});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ke=async(e,t,a,c)=>{const{data:{item:o}}=await A.post("/item",{name:e,note:t,image:a,category:c});return o},Qe=e=>A.delete("/item/"+e),Ye=async()=>{const{data:{items:e}}=await A.get("/item");if(e)return e};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Xe({setCategory:e}){const{categories:t}=D(),[a,c]=b.exports.useState(""),[o,s]=b.exports.useState(!1),l=g=>{e(g),c(g),s(!1)};return r("div",{className:"position-relative",children:[r(u.Group,{className:"mb-3",controlId:"category",children:[i(u.Label,{children:"Category"}),i(u.Control,{type:"text",placeholder:"Enter a category",value:a,onChange:g=>{c(g.target.value),e(g.target.value),s(!0)},onFocus:()=>s(!0),onBlur:()=>!o&&c(""),onKeyUp:g=>g.key==="Escape"&&s(!1)})]}),o&&i(Ze,{categories:t,filter:a.toLocaleLowerCase(),selectFromList:l})]})}function Ze({filter:e,selectFromList:t,categories:a}){const c=s=>{s.preventDefault();const l=s.target;l&&t(l.innerText)},o=e?a.filter(s=>s.toLocaleLowerCase().startsWith(e)):[];return i(W,{className:"position-absolute w-100 overflow-auto",style:{maxHeight:"100px"},children:o.map(s=>i(W.Item,{eventKey:s,action:!0,onClick:c,children:s},s))})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function et(){const{setSidebarMode:e}=L(),{addNewItem:t}=D(),{setNotification:a}=x(),[c,o]=b.exports.useState(""),[s,l]=b.exports.useState(""),[g,d]=b.exports.useState(""),[n,h]=b.exports.useState(""),f=()=>{e("EDIT_AMOUNTS")};return r("div",{className:"px-2 py-4 h-100 overflow-auto",children:[i("h4",{children:"Add a New Item"}),r(u,{onSubmit:async m=>{if(m.preventDefault(),!s||!c)return a({message:"name and category are required"});try{const p=await Ke(s,g,n,c);t(p)}catch(p){console.log(p)}},children:[r(u.Group,{className:"mb-3",controlId:"name",children:[i(u.Label,{children:"Name"}),i(u.Control,{type:"text",placeholder:"Enter a name",value:s,onChange:m=>{l(m.target.value)}})]}),r(u.Group,{className:"mb-3",controlId:"note",children:[i(u.Label,{children:"Note (Optional)"}),i(u.Control,{as:"textarea",placeholder:"Enter a note",value:g,onChange:m=>{d(m.target.value)}})]}),r(u.Group,{className:"mb-3",controlId:"image",children:[i(u.Label,{children:"Image (Optional)"}),i(u.Control,{type:"text",placeholder:"Enter a url",value:n,onChange:m=>{h(m.target.value)}})]}),i(Xe,{setCategory:o}),r(N,{direction:"horizontal",className:"justify-content-evenly",children:[i(C,{variant:"outline-primary",type:"button",onClick:f,children:"Cancel"}),i(C,{variant:"primary",className:"text-white",type:"submit",children:"Save"})]})]})]})}const tt="/assets/app.a3ae1e71.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function k(){const[e,t]=j($),a=n=>{var h;return(h=e.items[n.category.name])==null?void 0:h.findIndex(f=>f.item._id===n._id)};return{activeShoppingList:e,setActiveShoppingList:t,addItemToActiveShoppingList:n=>{a(n)>-1||t(it({item:n,amount:1,done:!1}))},removeItemFromActiveShoppingList:(n,h)=>{t(at(n,h))},changeAmountOfItem:(n,h,f)=>{t(st(n,h,f))},updateActiveShoppingListInfo:n=>t(ct(n)),itemToggleDone:(n,h)=>t(ot(n,h)),resetActiveShoppingListState:()=>t(nt())}}function it(e){return t=>{const a=e.item.category.name,c=t.items[a]||[];return{...t,items:{...t.items,[a]:[...c,e]}}}}function at(e,t){return a=>{const c=JSON.parse(JSON.stringify(a));if(c.items[e]){const o=c.items[e].findIndex(s=>s.item._id===t);o>-1&&c.items[e].splice(o,1)}return c}}function st(e,t,a){return c=>{const o=JSON.parse(JSON.stringify(c)),s=o.items[e][t];return a==="decrease"&&s.amount>0?s.amount--:s.amount!==0&&s.amount++,o}}function ot(e,t){return a=>{const c=JSON.parse(JSON.stringify(a)),o=c.items[e][t];return o.done=!o.done,c}}function ct(e){return t=>({...t,...e})}function nt(){return{_id:"",name:"Shopping List",items:{},status:"active"}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=async e=>{let t;return e._id?t=await A.put(`/shoppinglist/${e._id}`,e):t=await A.post("/shoppinglist",e),t.data},rt=async()=>(await A.get("/shoppinglist")).data,re=async e=>(await A.get(`/shoppinglist/${e}`)).data,lt=async(e,t)=>{const a=await A.put(`shoppinglist/${e}/updateitem`,t);if(!a.data)throw new Error("connection problem");return a.data};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/shoppingLists.ts/shoppingListsState",y([]));le.debugLabel="shoppingListsState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function O(){const[e,t]=j(le);return{refreshShoppingLists:async()=>{const c=await rt();t(c)},setShoppingLists:t,shoppingLists:e}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function he(e){let t;for(const a of e)if(!t&&a.status==="active"){t=a;break}return t?{...t,items:{}}:{_id:"",name:"Shopping List",items:{},status:"active"}}function de(e){var a;const t={};if((a=e.items)!=null&&a.length)for(const c of e.items){const o=c.item.category.name;o in t?t[o].push(c):t[o]=[c]}return{name:e.name,status:e.status,items:t,_id:e._id,createdAt:e.createdAt}}function ht(e){const t=[];for(const a in e.items)e.items[a].forEach(c=>{const o={done:c.done,amount:c.amount,item:c.item._id};t.push(o)});return{name:e.name,status:e.status,items:t,_id:e._id}}function Rt(e){return new Intl.DateTimeFormat([],{weekday:"short",day:"numeric",month:"numeric",year:"numeric"}).format(new Date(e))}const dt="/assets/sauce.0de770c6.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function me(){const{setSidebarMode:e}=L();return r("div",{className:"rounded-3 mb-3 d-flex",style:{backgroundColor:"#80485B"},children:[i(E,{sm:4,className:"p-0",children:i(G,{className:"mt-n4 p-2",src:dt,fluid:!0})}),i(E,{children:r(N,{gap:1,className:"p-2 justify-content-center h-100",children:[i("p",{className:"text-white fw-bold fs-6",children:"Didn't find what you need?"}),i(C,{className:"rounded-pill max-content",variant:"light",onClick:()=>{e("ADD_ITEM")},children:"Add Item"})]})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function mt(){const{setSidebarMode:e}=L(),{activeShoppingList:t,removeItemFromActiveShoppingList:a,changeAmountOfItem:c,updateActiveShoppingListInfo:o}=k(),{refreshShoppingLists:s}=O(),[l,g]=b.exports.useState(""),d=b.exports.useRef(null),{setNotification:n}=x(),h=()=>{t._id?e("TOGGLE_DONE"):n({message:"You should save the current list before editing!"})},f=async()=>{var w;const v=(w=d.current)==null?void 0:w.value,m=t.name,p={...t,name:v||m};try{const S=await ne(ht(p));o({name:S.name,status:S.status}),await s(),n({message:"Shopping list successfully saved",variant:"success"})}catch{n({message:"Saving request failed!",variant:"danger"})}};return i(z,{children:r("div",{className:"p-4 d-flex flex-column h-100",style:{backgroundColor:"#FFF0DE"},children:[i(me,{}),Object.keys(t.items).length?r("div",{className:"flex-fill d-flex flex-column position-relative overflow-auto",children:[r(N,{direction:"horizontal",className:"justify-content-between",children:[i("h5",{children:t.name}),i("div",{title:"Change completed status",children:i(Y,{size:"1.5rem",onClick:h})})]}),Object.entries(t.items).map(([v,m])=>m.length>0&&r("div",{className:"flex-fill",children:[i("h6",{className:"text-muted mt-2",children:v}),m.map((p,w)=>{const S=l===p.item._id,I=S?"":" unclickable o-0";return r(N,{direction:"horizontal",className:"justify-content-between align-items-center mb-1",onMouseEnter:()=>g(p.item._id),onMouseLeave:()=>g(""),children:[i("span",{className:"fw-bold",children:p.item.name}),r("div",{className:`d-flex clickable gap-1${S?" bg-white":""}`,children:[i("div",{style:{transform:"scale(1.2)"},className:`"h-100 bg-primary d-flex align-items-center flex-column"+${I}`,children:i(je,{className:"list-icon-inverted",onClick:()=>a(v,p.item._id)})}),r(N,{direction:"horizontal",children:[i("div",{className:I,children:i(xe,{className:"list-icon",onClick:()=>c(v,w,"decrease")})}),r(C,{size:"sm",className:"px-4 m-1 rounded-pill unclickable o-100",variant:"outline-primary",children:[`${p.amount} `," ",i("span",{className:"w-ch3 d-inline-block",children:p.amount>1?"pcs":"pc"})]}),i("div",{className:I,children:i(Ie,{className:"list-icon",onClick:()=>c(v,w,"increase")})})]})]})]},p.item._id)})]},v)),i("div",{className:"bg-white mt-3",children:r(U,{size:"sm",className:"",children:[i(Me,{placeholder:"Enter the new name",ref:d}),i(U.Text,{className:"p-0",children:i(C,{variant:"primary",className:"h-100 text-white",onClick:f,children:"Save"})})]})})]}):r("div",{className:"d-flex flex-column",style:{minHeight:"100%"},children:[i("div",{className:"text-center flex-fill d-flex flex-column justify-content-center",children:i("p",{children:"NO ITEMS"})}),i("div",{className:"flex-fill p-3",children:i(G,{fluid:!0,src:tt,width:"60%",height:"auto"})})]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/selectedItem.ts/selectedItemState",y({_id:"",name:"",note:"",image:"",category:{name:""}}));ue.debugLabel="selectedItemState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ut(){const[e,t]=j(ue);return{selectedItem:e,setSelectedItem:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function gt(){const{selectedItem:e}=ut(),{addItemToActiveShoppingList:t,removeItemFromActiveShoppingList:a}=k(),{removeItem:c}=D(),{setSidebarMode:o}=L(),s=()=>{o("EDIT_AMOUNTS")},l=()=>{t(e),s()},g=()=>{Qe(e._id).then(()=>{c(e._id),a(e.category.name,e._id),s()}).catch()};return r("div",{className:"d-flex flex-column position-relative h-100 p-1 m-1",children:[r(C,{variant:"link",onClick:s,children:[i(ke,{})," Back"]}),r(N,{className:"overflow-auto mb-5",children:[i("div",{style:{maxHeight:"200px"},children:i(G,{src:e.image||"https://via.placeholder.com/300",className:"img-fluid object-fit-cover",rounded:!0})}),r("div",{children:[i("small",{children:"name"}),i("p",{children:e.name})]}),r("div",{children:[i("small",{children:"category"}),i("p",{children:e.category.name})]}),r("div",{children:[i("small",{children:"note"}),i("p",{children:e.note})]})]}),r("div",{className:"d-flex justify-content-evenly bg-white position-absolute bottom-0 mt-5 p-3 w-100 gap-4",children:[i(C,{variant:"outline-secondary",onClick:g,children:"Delete"}),i(C,{variant:"primary",onClick:l,children:"Add To List"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pt(e){return r(_,{show:e.show,onHide:e.onHide,children:[i(_.Header,{closeButton:!0,children:r(_.Title,{children:["Are you sure that you want to ",e.mode," this list?"]})}),r(_.Footer,{children:[i(C,{variant:"secondary",onClick:e.onHide,children:"Cancel"}),i(C,{variant:"danger",onClick:e.onConfirm,children:"Yes"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ft(){const{activeShoppingList:e,itemToggleDone:t,resetActiveShoppingListState:a,updateActiveShoppingListInfo:c}=k(),{setSidebarMode:o}=L(),[s,l]=b.exports.useState({mode:"none",show:!1}),{refreshShoppingLists:g}=O(),{setNotification:d}=x(),n=()=>{o("EDIT_AMOUNTS")},h=(p,w,S)=>{lt(e._id,{_id:S._id,amount:S.amount,done:!S.done}).then(()=>{t(p,w)}).catch(()=>d({message:"Updating Failed.",variant:"danger"}))},f=()=>{l({mode:"cancel",show:!0})},v=()=>{l({mode:"complete",show:!0})};return r(z,{children:[i(pt,{onHide:()=>l({mode:"none",show:!1}),onConfirm:()=>{if(!["complete","cancel"].includes(s.mode))return l({mode:"none",show:!1});const p=e.status,w={status:s.mode==="complete"?"completed":"cancelled",_id:e._id};ne(w).then(()=>{a(),g()}).catch(()=>{c({status:p}),d({message:"Updating Failed.",variant:"danger"})}),l({mode:"none",show:!1})},...s}),r("div",{className:"p-4 d-flex flex-column h-100",style:{backgroundColor:"#FFF0DE"},children:[i(me,{}),Object.keys(e.items).length?r("div",{className:"flex-fill d-flex flex-column position-relative overflow-auto",children:[r(N,{direction:"horizontal",className:"justify-content-between",children:[i("h5",{children:e.name}),i("div",{title:"Change amounts",children:i(Y,{size:"1.5rem",onClick:n})})]}),Object.entries(e.items).map(([p,w])=>w.length>0&&r("div",{className:"flex-fill",children:[i("div",{className:"fs-6 text-muted mt-1",children:p}),w.map((S,I)=>r(N,{direction:"horizontal",className:"justify-content-between align-items-center py-2",children:[r("div",{children:[i(u.Check,{inline:!0,name:"group1",type:"checkbox",id:"inline-checkbox",checked:S.done,onChange:()=>h(p,I,S)}),i("span",{className:"fw-bold",style:{textDecorationLine:`${S.done?"line-through":"none"}`},children:S.item.name})]}),i(C,{size:"sm",className:"px-4 rounded-pill",variant:"outline-primary",children:i("span",{className:"d-inline-block",style:{width:"6ch"},children:`${S.amount} ${S.amount>1?"pcs":"pc"}`})})]},S.item._id))]},p)),r("div",{className:"mt-3 d-flex justify-content-evenly",children:[i(C,{variant:"outline-primary",className:"h-100",onClick:f,children:"Cancel"}),i(C,{variant:"info",className:"h-100 text-white",onClick:v,children:"Complete"})]})]}):r("div",{className:"d-flex flex-column",style:{minHeight:"100%"},children:[i("div",{className:"text-center flex-fill d-flex flex-column justify-content-center",children:i("p",{children:"NO ITEMS"})}),i("div",{className:"flex-fill p-3"})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function bt(){const{state:e}=L(),a={ADD_ITEM:et,SHOW_ITEM:gt,TOGGLE_DONE:ft,EDIT_AMOUNTS:mt}[e.mode],c=b.exports.useRef(null);return i(_e,{mode:"out-in",children:i(Ee,{nodeRef:c,timeout:300,classNames:"sidebarfade",children:i("div",{ref:c,className:"h-100",children:i(a,{})})},e.mode)})}const vt="modulepreload",St=function(e){return"/"+e},K={},P=function(t,a,c){if(!a||a.length===0)return t();const o=document.getElementsByTagName("link");return Promise.all(a.map(s=>{if(s=St(s),s in K)return;K[s]=!0;const l=s.endsWith(".css"),g=l?'[rel="stylesheet"]':"";if(!!c)for(let h=o.length-1;h>=0;h--){const f=o[h];if(f.href===s&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${g}`))return;const n=document.createElement("link");if(n.rel=l?"stylesheet":vt,l||(n.as="script",n.crossOrigin=""),n.href=s,document.head.appendChild(n),l)return new Promise((h,f)=>{n.addEventListener("load",h),n.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const H=()=>i("div",{"data-testid":"spinner",className:"d-flex justify-content-center align-items-center w-100 vh-100",children:i(De,{animation:"border",variant:"primary"})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const wt=b.exports.lazy(()=>P(()=>import("./Items.415d4b54.js"),["assets/Items.415d4b54.js","assets/vendor.f851533e.js","assets/useSafeDispatch.fdd96a09.js"])),Ct=b.exports.lazy(()=>P(()=>import("./ShoppingList.e2be3791.js"),["assets/ShoppingList.e2be3791.js","assets/vendor.f851533e.js"])),At=b.exports.lazy(()=>P(()=>import("./ShoppingHistory.b504697d.js"),["assets/ShoppingHistory.b504697d.js","assets/vendor.f851533e.js"])),yt=b.exports.lazy(()=>P(()=>import("./Stats.79d603ab.js"),["assets/Stats.79d603ab.js","assets/vendor.f851533e.js","assets/useSafeDispatch.fdd96a09.js"]));function Tt(){return i(b.exports.Suspense,{fallback:i(H,{}),children:r(X,{children:[i(T,{path:"/items",element:i(wt,{})}),i(T,{path:"/history",element:i(At,{})}),i(T,{path:"/stats",element:i(yt,{})}),i(T,{path:"/shoppinglist/:id",element:i(Ct,{})}),i(T,{path:"*",element:i(Z,{replace:!0,to:"/items"})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Nt(){const{setSidebarState:e,isSidebarVisible:t,setSidebarActivity:a}=L(),c=ee();return b.exports.useEffect(()=>{const o=window.innerWidth<768;e({isMobile:o,isActivated:!o});const s=()=>{window.innerWidth<768?e({isMobile:!0,isActivated:!1}):e({isMobile:!1,isActivated:!0})};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]),b.exports.useEffect(()=>{window.innerWidth<768&&a(!1)},[c.pathname]),i(z,{children:r("div",{className:"d-flex vh-100 mx-0 overflow-auto",children:[r(E,{id:"content",xs:10,sm:11,md:6,lg:7,xl:8,className:"ms-5",children:[i("div",{className:"position-fixed start-0 h-100",children:i(Ue,{})}),i(Tt,{})]}),i(E,{id:"sidebar-container",sm:7,md:5,lg:4,xl:3,className:`${t?"d-block":"d-none"} h-100 position-fixed end-0 bg-white`,children:i(bt,{})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Lt({message:e}){return r("div",{className:"d-flex flex-column text-center justify-content-center vh-100",children:[i("p",{className:"text-danger fs-3 fw-bold",children:e}),i("a",{href:"/",children:"REFRESH PAGE"})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function jt(){const{setNotification:e,state:{message:t,variant:a}}=x();return i(Oe,{position:"top-end",className:"p-3",children:i(q,{className:"d-inline-block m-1",bg:a.toLowerCase(),onClose:()=>e({message:""}),show:!!t,delay:2e3,autohide:!0,children:i(q.Body,{className:"text-white fs-5",children:t})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/auth.ts/authState",y({id:"",email:""}));ge.debugLabel="authState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pe(){const[e,t]=j(ge),a=c=>t(o=>({...o,...c}));return{userId:e==null?void 0:e.id,auth:e,setAuth:a}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xt=async(e,t,a)=>{localStorage.clear();const c=a==="register"?"/auth/register":"/auth/login",o=await A.post(c,{email:e,password:t}),{user:s,token:l}=o.data;return localStorage.setItem("token",l),s},It=async()=>{if(!localStorage.getItem("token"))throw{message:""};const{data:e}=await A.get("/auth/me");return e.user},Mt=async()=>{try{const e=await It(),t=await Ye();let a=he(e.shopping_lists);if(a._id){const c=await re(a._id);c&&(a=de(c))}return{userData:e,items:t,activeList:a}}catch(e){throw localStorage.removeItem("token"),e}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe={email:R().required("required").email("invalid email"),password:R().required("required").min(6)},kt=te().shape(fe),_t=te().shape({...fe,passwordConfirm:R().required().test("password-confirm","password confirm failed",(e,t)=>e===t.parent.password)});function Q(){const e=Pe(),{pathname:t}=ee(),{setAuth:a}=pe(),{setShoppingLists:c}=O(),{setActiveShoppingList:o}=k(),[s,l]=b.exports.useState(!1),{setNotification:g}=x();return b.exports.useEffect(()=>{l(t.startsWith("/register"))},[t]),i("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i(Fe,{initialValues:{email:"",password:"",passwordConfirm:""},validationSchema:s?_t:kt,onSubmit:async({email:n,password:h},{setSubmitting:f})=>{let v="login";s&&(v="register");try{const m=await xt(n,h,v);a({id:m._id,email:m.email}),c(m.shopping_lists);let p=he(m.shopping_lists);if(p._id){const w=await re(p._id);w&&(p=de(w))}o(p),e("/items",{replace:!0})}catch(m){f(!1),g({message:m.message,variant:"Danger"})}},children:({errors:n,touched:h,handleSubmit:f,isSubmitting:v,getFieldProps:m})=>r(u,{onSubmit:f,noValidate:!0,children:[r(u.Group,{className:"mb-3",controlId:"formBasicEmail",children:[i(u.Label,{children:"Email address"}),i(u.Control,{type:"email",placeholder:"Enter email",...m("email"),isInvalid:h.email&&!!n.email,isValid:h.email&&!n.email}),i(u.Control.Feedback,{type:"invalid",children:n.email})]}),r(u.Group,{className:"mb-3",controlId:"formBasicPassword",children:[i(u.Label,{children:"Password"}),i(u.Control,{type:"password",placeholder:"Password",...m("password"),isInvalid:h.password&&!!n.password,isValid:h.password&&!n.password}),i(u.Control.Feedback,{type:"invalid",children:n.password})]}),s&&r(u.Group,{className:"mb-3",controlId:"formBasicPasswordConfirm",children:[i(u.Label,{children:"Password Confirm"}),i(u.Control,{type:"password",placeholder:"Password Confirm",...m("passwordConfirm"),isInvalid:h.passwordConfirm&&!!n.passwordConfirm,isValid:h.passwordConfirm&&!n.passwordConfirm}),i(u.Control.Feedback,{type:"invalid",children:n.passwordConfirm})]}),i(C,{variant:"primary",type:"submit",disabled:v,children:"Submit"}),s?r("p",{children:["Already registered? ",i(J,{to:"/login",children:"Login"})]}):r("p",{children:["Not registered? ",i(J,{to:"/register",children:"Register"})]})]})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Et(){return i(b.exports.Suspense,{fallback:i(H,{}),children:r(X,{children:[i(T,{path:"/register",element:i(Q,{})}),i(T,{path:"/login",element:i(Q,{})}),i(T,{path:"*",element:i(Z,{replace:!0,to:"/login"})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Dt(){const{userId:e,setAuth:t}=pe(),{setItems:a}=D(),[c,o]=b.exports.useState(!0),{setShoppingLists:s}=O(),{setActiveShoppingList:l}=k(),{setNotification:g}=x();return b.exports.useEffect(()=>{if(e)return o(!1);o(!0),Mt().then(d=>{var v,m;if(!d)return;const{userData:n,items:h,activeList:f}=d;t({id:(v=n._id)!=null?v:"",email:(m=n.email)!=null?m:""}),a(h),l(f),s(n.shopping_lists)}).catch(d=>{g({message:d.message,variant:"danger"})}).finally(()=>o(!1))},[e]),c?i(H,{}):i(Re,{children:r(Be,{fallback:i(Lt,{message:"Something Went Wrong"}),children:[i(jt,{}),e?i(Nt,{}):i(Ge,{children:i(Et,{})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ot=document.getElementById("root"),Pt=ze(Ot);Pt.render(i(b.exports.StrictMode,{children:i(Ve,{children:i(Dt,{})})}));export{H as T,L as a,D as b,ut as c,de as d,Rt as e,re as f,Ye as g,O as h,A as i,k as u};
