import{j as i,B as C,a as y,u as j,b as G,c as n,M as be,O as ve,T as Se,N as we,I as Ce,d as Ae,e as ye,f as Te,g as Ne,h as Le,r as f,F as g,L as U,S as N,C as E,i as B,k as z,l as Y,m as je,n as xe,o as Ie,p as W,q as Me,s as _e,t as k,v as ke,w as Ee,x as De,R as X,y as T,z as Z,A as ee,D as Oe,E as q,G as R,H as te,J as Pe,K as Fe,P as J,Q as Re,U as Ge,V as Be,W as ze,X as Ve}from"./vendor.23ce1301.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerpolicy&&(c.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?c.credentials="include":a.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();const $e="/assets/logo.5b151dc7.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function He(){return i("div",{className:"bg-white p-3",children:i(C,{variant:"danger",onClick:()=>{window.localStorage.removeItem("token"),window.location.reload()},children:"Logout"})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const V=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/sidebar.ts/sidebarState",y({mode:"EDIT_AMOUNTS",isMobile:!1,isActivated:!1}));V.debugLabel="sidebarState";const ie=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/sidebar.ts/isSidebarVisibleGetter",y(e=>{const{isMobile:t,isActivated:s}=e(V);return t?s:!0}));ie.debugLabel="isSidebarVisibleGetter";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function L(){const[e,t]=j(V),s=G(ie);return{state:e,setIsMobile:h=>t(r=>({...r,isMobile:h})),setSidebarMode:h=>t(r=>({...r,mode:h,isActivated:!0})),isSidebarVisible:s,setSidebarActivity:h=>t(r=>({...r,isActivated:h})),setSidebarState:h=>t(r=>({...r,...h})),toggleShoppingList:()=>{t(h=>({...h,isActivated:!h.isActivated}))}}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const $=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/activeShoppingList.ts/activeShoppingListState",y({_id:"",name:"",items:{},status:"active"}));$.debugLabel="activeShoppingListState";const ae=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/activeShoppingList.ts/activeShoppingListLengthGetter",y(e=>{const t=e($);let s=0;for(const o in t.items)s+=t.items[o].length;return s}));ae.debugLabel="activeShoppingListLengthGetter";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Ue(){const e=G(ae),{toggleShoppingList:t}=L();return n("div",{className:"m-n1 text-white bg-primary rounded-circle position-relative",children:[i("div",{className:"p-1",onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:i(be,{color:"white"})}),i("div",{className:"position-absolute top-0 start-100 translate-middle rounded-3 px-1 bg-danger",children:i("div",{"data-testid":"shoppingListItemCount",className:"small",children:e})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function F({children:e,tooltip:t,to:s}){return i(ve,{placement:"right",overlay:i(Se,{id:"link-tooltip",children:t}),children:i(we,{to:s,className:({isActive:o})=>`my-4${o?" selected":""}`,children:e})},"nav-link")}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function We(){return n("div",{className:"d-flex flex-column align-items-center justify-content-between py-4 h-100 bg-white",children:[n("div",{className:"p-1 position-relative app-logo",children:[i("img",{src:$e,alt:"logo"}),i("div",{className:"logout position-absolute top-0 start-100",children:i(He,{})})]}),n(Ce.Provider,{value:{color:"black",className:"material-icon"},children:[n("nav",{className:"d-flex flex-column justify-content-between w-100",children:[i(F,{to:"/items",tooltip:"items",children:i(Ae,{})}),i(F,{to:"/history",tooltip:"history",children:i(ye,{})}),i(F,{to:"/stats",tooltip:"stats",children:i(Te,{})})]}),i(Ue,{})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const M=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/itemsState",y([]));M.debugLabel="itemsState";const se=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/categoriesAndItemsState",y(e=>{const t=new Set,s=e(M);s.forEach(a=>t.add(a.category.name));const o=[];return t.forEach(a=>{o.push([a,s.filter(c=>c.category.name===a)])}),{categories:Array.from(t),itemsGroupedByCategory:o}}));se.debugLabel="categoriesAndItemsState";const oe=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/items.ts/removeItemFromState",y(null,(e,t,s)=>{const a=e(M).slice(),c=a.findIndex(l=>l._id===s);c>-1&&a.splice(c,1),t(M,a)}));oe.debugLabel="removeItemFromState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function D(){const[e,t]=j(M),s=h=>t(h),o=h=>t(r=>[...r,h]),a=Ne(oe),{categories:c,itemsGroupedByCategory:l}=G(se);return{setItems:s,addNewItem:o,removeItem:a,items:e,findItemsByName:(h,r=5)=>{const m=[];for(const b of e)if(b.name.includes(h)&&m.push(b),m.length>=r)break;return m},categories:c,itemsGroupedByCategory:l}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ce=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/notification.ts/notificationState",y({message:"",variant:"info"}));ce.debugLabel="notificationState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function x(){const[e,t]=j(ce);return{setNotification:o=>t(a=>({...a,...o})),state:e}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const qe={Accept:"application/json","Content-Type":"application/json"},Je="http://localhost:5000/api",A=Le.create({baseURL:Je,headers:qe,timeout:8e3});A.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));A.interceptors.response.use(e=>e,e=>{const t=e.config;return e.response.status===401&&!t._retry&&(t._retry=!0),Promise.reject(e.response.data)});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ke=async(e,t,s,o)=>{const{data:{item:a}}=await A.post("/item",{name:e,note:t,image:s,category:o});return a},Qe=e=>A.delete("/item/"+e),Ye=async()=>{const{data:{items:e}}=await A.get("/item");if(e)return e};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Xe({setCategory:e}){const{categories:t}=D(),[s,o]=f.exports.useState(""),[a,c]=f.exports.useState(!1),l=d=>{e(d),o(d),c(!1)};return n("div",{className:"position-relative",children:[n(g.Group,{className:"mb-3",controlId:"category",children:[i(g.Label,{children:"Category"}),i(g.Control,{type:"text",placeholder:"Enter a category",value:s,onChange:d=>{o(d.target.value),e(d.target.value),c(!0)},onFocus:()=>c(!0),onBlur:()=>!a&&o(""),onKeyUp:d=>d.key==="Escape"&&c(!1)})]}),a&&i(Ze,{categories:t,filter:s.toLocaleLowerCase(),selectFromList:l})]})}function Ze({filter:e,selectFromList:t,categories:s}){const o=c=>{c.preventDefault();const l=c.target;l&&t(l.innerText)},a=e?s.filter(c=>c.toLocaleLowerCase().startsWith(e)):[];return i(U,{className:"position-absolute w-100 overflow-auto",style:{maxHeight:"100px"},children:a.map(c=>i(U.Item,{eventKey:c,action:!0,onClick:o,children:c},c))})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function et(){const{setSidebarMode:e}=L(),{addNewItem:t}=D(),{setNotification:s}=x(),[o,a]=f.exports.useState(""),[c,l]=f.exports.useState(""),[d,h]=f.exports.useState(""),[r,m]=f.exports.useState(""),b=()=>{e("EDIT_AMOUNTS")};return n("div",{className:"px-2 py-4 h-100 overflow-auto",children:[i("h4",{children:"Add a New Item"}),n(g,{onSubmit:async u=>{if(u.preventDefault(),!c||!o)return s({message:"name and category are required"});try{const p=await Ke(c,d,r,o);t(p)}catch(p){console.log(p)}},children:[n(g.Group,{className:"mb-3",controlId:"name",children:[i(g.Label,{children:"Name"}),i(g.Control,{type:"text",placeholder:"Enter a name",value:c,onChange:u=>{l(u.target.value)}})]}),n(g.Group,{className:"mb-3",controlId:"note",children:[i(g.Label,{children:"Note (Optional)"}),i(g.Control,{as:"textarea",placeholder:"Enter a note",value:d,onChange:u=>{h(u.target.value)}})]}),n(g.Group,{className:"mb-3",controlId:"image",children:[i(g.Label,{children:"Image (Optional)"}),i(g.Control,{type:"text",placeholder:"Enter a url",value:r,onChange:u=>{m(u.target.value)}})]}),i(Xe,{setCategory:a}),n(N,{direction:"horizontal",className:"justify-content-evenly",children:[i(C,{variant:"outline-primary",type:"button",onClick:b,children:"Cancel"}),i(C,{variant:"primary",className:"text-white",type:"submit",children:"Save"})]})]})]})}const tt="/assets/app.a3ae1e71.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function _(){const[e,t]=j($),s=r=>{var m;return(m=e.items[r.category.name])==null?void 0:m.findIndex(b=>b.item._id===r._id)};return{activeShoppingList:e,setActiveShoppingList:t,addItemToActiveShoppingList:r=>{s(r)>-1||t(it({item:r,amount:1,done:!1}))},removeItemFromActiveShoppingList:(r,m)=>{t(at(r,m))},changeAmountOfItem:(r,m,b)=>{t(st(r,m,b))},updateActiveShoppingListInfo:r=>t(ct(r)),itemToggleDone:(r,m)=>t(ot(r,m)),resetActiveShoppingListState:()=>t(nt())}}function it(e){return t=>{const s=e.item.category.name,o=t.items[s]||[];return{...t,items:{...t.items,[s]:[...o,e]}}}}function at(e,t){return s=>{const o=JSON.parse(JSON.stringify(s));if(o.items[e]){const a=o.items[e].findIndex(c=>c.item._id===t);a>-1&&o.items[e].splice(a,1)}return o}}function st(e,t,s){return o=>{const a=JSON.parse(JSON.stringify(o)),c=a.items[e][t];return s==="decrease"&&c.amount>0?c.amount--:c.amount!==0&&c.amount++,a}}function ot(e,t){return s=>{const o=JSON.parse(JSON.stringify(s)),a=o.items[e][t];return a.done=!a.done,o}}function ct(e){return t=>({...t,...e})}function nt(){return{_id:"",name:"Shopping List",items:{},status:"active"}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ne=async e=>{let t;return e._id?t=await A.put(`/shoppinglist/${e._id}`,e):t=await A.post("/shoppinglist",e),t.data},rt=async()=>(await A.get("/shoppinglist")).data,re=async e=>(await A.get(`/shoppinglist/${e}`)).data,lt=async(e,t)=>{const s=await A.put(`shoppinglist/${e}/updateitem`,t);if(!s.data)throw new Error("connection problem");return s.data};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const le=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/shoppingLists.ts/shoppingListsState",y([]));le.debugLabel="shoppingListsState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function O(){const[e,t]=j(le);return{refreshShoppingLists:async()=>{const o=await rt();t(o)},setShoppingLists:t,shoppingLists:e}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function he(e){let t;for(const s of e)if(!t&&s.status==="active"){t=s;break}return t?{...t,items:{}}:{_id:"",name:"Shopping List",items:{},status:"active"}}function de(e){var s;const t={};if((s=e.items)!=null&&s.length)for(const o of e.items){const a=o.item.category.name;a in t?t[a].push(o):t[a]=[o]}return{name:e.name,status:e.status,items:t,_id:e._id,createdAt:e.createdAt}}function ht(e){const t=[];for(const s in e.items)e.items[s].forEach(o=>{const a={done:o.done,amount:o.amount,item:o.item._id};t.push(a)});return{name:e.name,status:e.status,items:t,_id:e._id}}function Rt(e){return new Intl.DateTimeFormat([],{weekday:"short",day:"numeric",month:"numeric",year:"numeric"}).format(new Date(e))}const dt="/assets/sauce.0de770c6.svg";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function me(){const{setSidebarMode:e}=L();return n("div",{className:"rounded-3 mb-3 d-flex",style:{backgroundColor:"#80485B"},children:[i(E,{sm:4,className:"p-0",children:i(B,{className:"mt-n4 p-2",src:dt,fluid:!0})}),i(E,{children:n(N,{gap:1,className:"p-2 justify-content-center h-100",children:[i("p",{className:"text-white fw-bold fs-6",children:"Didn't find what you need?"}),i(C,{className:"rounded-pill max-content",variant:"light",onClick:()=>{e("ADD_ITEM")},children:"Add Item"})]})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function mt(){const{setSidebarMode:e}=L(),{activeShoppingList:t,removeItemFromActiveShoppingList:s,changeAmountOfItem:o,updateActiveShoppingListInfo:a}=_(),{refreshShoppingLists:c}=O(),[l,d]=f.exports.useState(""),h=f.exports.useRef(null),{setNotification:r}=x(),m=()=>{t._id?e("TOGGLE_DONE"):r({message:"You should save the current list before editing!"})},b=async()=>{var w;const v=(w=h.current)==null?void 0:w.value,u=t.name,p={...t,name:v||u};try{const S=await ne(ht(p));a({name:S.name,status:S.status}),await c(),r({message:"Shopping list successfully saved",variant:"success"})}catch{r({message:"Saving request failed!",variant:"danger"})}};return i(z,{children:n("div",{className:"p-4 d-flex flex-column h-100",style:{backgroundColor:"#FFF0DE"},children:[i(me,{}),Object.keys(t.items).length?n("div",{className:"flex-fill d-flex flex-column position-relative overflow-auto",children:[n(N,{direction:"horizontal",className:"justify-content-between",children:[i("h5",{children:t.name}),i("div",{title:"Change completed status",children:i(Y,{size:"1.5rem",onClick:m})})]}),Object.entries(t.items).map(([v,u])=>u.length>0&&n("div",{className:"flex-fill",children:[i("h6",{className:"text-muted mt-2",children:v}),u.map((p,w)=>{const S=l===p.item._id,I=S?"":" unclickable o-0";return n(N,{direction:"horizontal",className:"justify-content-between align-items-center mb-1",onMouseEnter:()=>d(p.item._id),onMouseLeave:()=>d(""),children:[i("span",{className:"fw-bold",children:p.item.name}),n("div",{className:`d-flex clickable gap-1${S?" bg-white":""}`,children:[i("div",{style:{transform:"scale(1.2)"},className:`"h-100 bg-primary d-flex align-items-center flex-column"+${I}`,children:i(je,{className:"list-icon-inverted",onClick:()=>s(v,p.item._id)})}),n(N,{direction:"horizontal",children:[i("div",{className:I,children:i(xe,{className:"list-icon",onClick:()=>o(v,w,"decrease")})}),n(C,{size:"sm",className:"px-4 m-1 rounded-pill unclickable o-100",variant:"outline-primary",children:[`${p.amount} `," ",i("span",{className:"w-ch3 d-inline-block",children:p.amount>1?"pcs":"pc"})]}),i("div",{className:I,children:i(Ie,{className:"list-icon",onClick:()=>o(v,w,"increase")})})]})]})]},p.item._id)})]},v)),i("div",{className:"bg-white mt-3",children:n(W,{size:"sm",className:"",children:[i(Me,{placeholder:"Enter the new name",ref:h}),i(W.Text,{className:"p-0",children:i(C,{variant:"primary",className:"h-100 text-white",onClick:b,children:"Save"})})]})})]}):n("div",{className:"d-flex flex-column",style:{minHeight:"100%"},children:[i("div",{className:"text-center flex-fill d-flex flex-column justify-content-center",children:i("p",{children:"NO ITEMS"})}),i("div",{className:"flex-fill p-3",children:i(B,{fluid:!0,src:tt,width:"60%",height:"auto"})})]})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ue=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/selectedItem.ts/selectedItemState",y({_id:"",name:"",note:"",image:"",category:{name:""}}));ue.debugLabel="selectedItemState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ut(){const[e,t]=j(ue);return{selectedItem:e,setSelectedItem:t}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function gt(){const{selectedItem:e}=ut(),{addItemToActiveShoppingList:t,removeItemFromActiveShoppingList:s}=_(),{removeItem:o}=D(),{setSidebarMode:a}=L(),c=()=>{a("EDIT_AMOUNTS")},l=()=>{t(e),c()},d=()=>{Qe(e._id).then(()=>{o(e._id),s(e.category.name,e._id),c()}).catch()};return n("div",{className:"d-flex flex-column position-relative h-100 p-1 m-1",children:[n(C,{variant:"link",onClick:c,children:[i(_e,{})," Back"]}),n(N,{className:"overflow-auto mb-5",children:[i("div",{style:{maxHeight:"200px"},children:i(B,{src:e.image||"https://via.placeholder.com/300",className:"img-fluid object-fit-cover",rounded:!0})}),n("div",{children:[i("small",{children:"name"}),i("p",{children:e.name})]}),n("div",{children:[i("small",{children:"category"}),i("p",{children:e.category.name})]}),n("div",{children:[i("small",{children:"note"}),i("p",{children:e.note})]})]}),n("div",{className:"d-flex justify-content-evenly bg-white position-absolute bottom-0 mt-5 p-3 w-100 gap-4",children:[i(C,{variant:"outline-secondary",onClick:d,children:"Delete"}),i(C,{variant:"primary",onClick:l,children:"Add To List"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pt(e){return n(k,{show:e.show,onHide:e.onHide,children:[i(k.Header,{closeButton:!0,children:n(k.Title,{children:["Are you sure that you want to ",e.mode," this list?"]})}),n(k.Footer,{children:[i(C,{variant:"secondary",onClick:e.onHide,children:"Cancel"}),i(C,{variant:"danger",onClick:e.onConfirm,children:"Yes"})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function ft(){const{activeShoppingList:e,itemToggleDone:t,resetActiveShoppingListState:s,updateActiveShoppingListInfo:o}=_(),{setSidebarMode:a}=L(),[c,l]=f.exports.useState({mode:"none",show:!1}),{refreshShoppingLists:d}=O(),{setNotification:h}=x(),r=()=>{a("EDIT_AMOUNTS")},m=(p,w,S)=>{lt(e._id,{_id:S._id,amount:S.amount,done:!S.done}).then(()=>{t(p,w)}).catch(()=>h({message:"Updating Failed.",variant:"danger"}))},b=()=>{l({mode:"cancel",show:!0})},v=()=>{l({mode:"complete",show:!0})};return n(z,{children:[i(pt,{onHide:()=>l({mode:"none",show:!1}),onConfirm:()=>{if(!["complete","cancel"].includes(c.mode))return l({mode:"none",show:!1});const p=e.status,w={status:c.mode==="complete"?"completed":"cancelled",_id:e._id};ne(w).then(()=>{s(),d()}).catch(()=>{o({status:p}),h({message:"Updating Failed.",variant:"danger"})}),l({mode:"none",show:!1})},...c}),n("div",{className:"p-4 d-flex flex-column h-100",style:{backgroundColor:"#FFF0DE"},children:[i(me,{}),Object.keys(e.items).length?n("div",{className:"flex-fill d-flex flex-column position-relative overflow-auto",children:[n(N,{direction:"horizontal",className:"justify-content-between",children:[i("h5",{children:e.name}),i("div",{title:"Change amounts",children:i(Y,{size:"1.5rem",onClick:r})})]}),Object.entries(e.items).map(([p,w])=>w.length>0&&n("div",{className:"flex-fill",children:[i("div",{className:"fs-6 text-muted mt-1",children:p}),w.map((S,I)=>n(N,{direction:"horizontal",className:"justify-content-between align-items-center py-2",children:[n("div",{children:[i(g.Check,{inline:!0,name:"group1",type:"checkbox",id:"inline-checkbox",checked:S.done,onChange:()=>m(p,I,S)}),i("span",{className:"fw-bold",style:{textDecorationLine:`${S.done?"line-through":"none"}`},children:S.item.name})]}),i(C,{size:"sm",className:"px-4 rounded-pill",variant:"outline-primary",children:i("span",{className:"d-inline-block",style:{width:"6ch"},children:`${S.amount} ${S.amount>1?"pcs":"pc"}`})})]},S.item._id))]},p)),n("div",{className:"mt-3 d-flex justify-content-evenly",children:[i(C,{variant:"outline-primary",className:"h-100",onClick:b,children:"Cancel"}),i(C,{variant:"info",className:"h-100 text-white",onClick:v,children:"Complete"})]})]}):n("div",{className:"d-flex flex-column",style:{minHeight:"100%"},children:[i("div",{className:"text-center flex-fill d-flex flex-column justify-content-center",children:i("p",{children:"NO ITEMS"})}),i("div",{className:"flex-fill p-3"})]})]})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function bt(){const{state:e}=L(),s={ADD_ITEM:et,SHOW_ITEM:gt,TOGGLE_DONE:ft,EDIT_AMOUNTS:mt}[e.mode],o=f.exports.useRef(null);return i(ke,{mode:"out-in",children:i(Ee,{nodeRef:o,timeout:300,classNames:"sidebarfade",children:i("div",{ref:o,className:"h-100",children:i(s,{})})},e.mode)})}const vt="modulepreload",St=function(e){return"/"+e},K={},P=function(t,s,o){return!s||s.length===0?t():Promise.all(s.map(a=>{if(a=St(a),a in K)return;K[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":vt,c||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),c)return new Promise((h,r)=>{d.addEventListener("load",h),d.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const H=()=>i("div",{"data-testid":"spinner",className:"d-flex justify-content-center align-items-center w-100 vh-100",children:i(De,{animation:"border",variant:"primary"})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const wt=f.exports.lazy(()=>P(()=>import("./Items.d6757e3c.js"),["assets/Items.d6757e3c.js","assets/vendor.23ce1301.js","assets/useSafeDispatch.606095a5.js"])),Ct=f.exports.lazy(()=>P(()=>import("./ShoppingList.1c2a19d4.js"),["assets/ShoppingList.1c2a19d4.js","assets/vendor.23ce1301.js"])),At=f.exports.lazy(()=>P(()=>import("./ShoppingHistory.7bcb6540.js"),["assets/ShoppingHistory.7bcb6540.js","assets/vendor.23ce1301.js"])),yt=f.exports.lazy(()=>P(()=>import("./Stats.6c8a2f46.js"),["assets/Stats.6c8a2f46.js","assets/vendor.23ce1301.js","assets/useSafeDispatch.606095a5.js"]));function Tt(){return i(f.exports.Suspense,{fallback:i(H,{}),children:n(X,{children:[i(T,{path:"/items",element:i(wt,{})}),i(T,{path:"/history",element:i(At,{})}),i(T,{path:"/stats",element:i(yt,{})}),i(T,{path:"/shoppinglist/:id",element:i(Ct,{})}),i(T,{path:"*",element:i(Z,{replace:!0,to:"/items"})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Nt(){const{setSidebarState:e,isSidebarVisible:t,setSidebarActivity:s}=L(),o=ee();return f.exports.useEffect(()=>{const a=window.innerWidth<768;e({isMobile:a,isActivated:!a});const c=()=>{window.innerWidth<768?e({isMobile:!0,isActivated:!1}):e({isMobile:!1,isActivated:!0})};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}},[]),f.exports.useEffect(()=>{window.innerWidth<768&&s(!1)},[o.pathname]),i(z,{children:n("div",{className:"d-flex vh-100 mx-0 overflow-auto",children:[n(E,{id:"content",xs:10,sm:11,md:6,lg:7,xl:8,className:"ms-5",children:[i("div",{className:"position-fixed start-0 h-100",children:i(We,{})}),i(Tt,{})]}),i(E,{id:"sidebar-container",sm:7,md:5,lg:4,xl:3,className:`${t?"d-block":"d-none"} h-100 position-fixed end-0 bg-white`,children:i(bt,{})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Lt({message:e}){return n("div",{className:"d-flex flex-column text-center justify-content-center vh-100",children:[i("p",{className:"text-danger fs-3 fw-bold",children:e}),i("a",{href:"/",children:"REFRESH PAGE"})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function jt(){const{setNotification:e,state:{message:t,variant:s}}=x();return i(Oe,{position:"top-end",className:"p-3",children:i(q,{className:"d-inline-block m-1",bg:s.toLowerCase(),onClose:()=>e({message:""}),show:!!t,delay:2e3,autohide:!0,children:i(q.Body,{className:"text-white fs-5",children:t})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const ge=globalThis.jotaiAtomCache.get("/home/aydin/Develop/Projects/shoppingify/react/src/store/auth.ts/authState",y({id:"",email:""}));ge.debugLabel="authState";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function pe(){const[e,t]=j(ge),s=o=>t(a=>({...a,...o}));return{userId:e==null?void 0:e.id,auth:e,setAuth:s}}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const xt=async(e,t,s)=>{localStorage.clear();const o=s==="register"?"/auth/register":"/auth/login",a=await A.post(o,{email:e,password:t}),{user:c,token:l}=a.data;return localStorage.setItem("token",l),c},It=async()=>{if(!localStorage.getItem("token"))throw{message:""};const{data:e}=await A.get("/auth/me");return e.user},Mt=async()=>{try{const e=await It(),t=await Ye();let s=he(e.shopping_lists);if(s._id){const o=await re(s._id);o&&(s=de(o))}return{userData:e,items:t,activeList:s}}catch(e){throw localStorage.removeItem("token"),e}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const fe={email:R().required("required").email("invalid email"),password:R().required("required").min(6)},_t=te().shape(fe),kt=te().shape({...fe,passwordConfirm:R().required().test("password-confirm","password confirm failed",(e,t)=>e===t.parent.password)});function Q(){const e=Pe(),{pathname:t}=ee(),{setAuth:s}=pe(),{setShoppingLists:o}=O(),{setActiveShoppingList:a}=_(),[c,l]=f.exports.useState(!1),{setNotification:d}=x();return f.exports.useEffect(()=>{l(t.startsWith("/register"))},[t]),i("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i(Fe,{initialValues:{email:"",password:"",passwordConfirm:""},validationSchema:c?kt:_t,onSubmit:async({email:r,password:m},{setSubmitting:b})=>{let v="login";c&&(v="register");try{const u=await xt(r,m,v);s({id:u._id,email:u.email}),o(u.shopping_lists);let p=he(u.shopping_lists);if(p._id){const w=await re(p._id);w&&(p=de(w))}a(p),e("/items",{replace:!0})}catch(u){b(!1),d({message:u.message,variant:"Danger"})}},children:({errors:r,touched:m,handleSubmit:b,isSubmitting:v,getFieldProps:u})=>n(g,{onSubmit:b,noValidate:!0,children:[n(g.Group,{className:"mb-3",controlId:"formBasicEmail",children:[i(g.Label,{children:"Email address"}),i(g.Control,{type:"email",placeholder:"Enter email",...u("email"),isInvalid:m.email&&!!r.email,isValid:m.email&&!r.email}),i(g.Control.Feedback,{type:"invalid",children:r.email})]}),n(g.Group,{className:"mb-3",controlId:"formBasicPassword",children:[i(g.Label,{children:"Password"}),i(g.Control,{type:"password",placeholder:"Password",...u("password"),isInvalid:m.password&&!!r.password,isValid:m.password&&!r.password}),i(g.Control.Feedback,{type:"invalid",children:r.password})]}),c&&n(g.Group,{className:"mb-3",controlId:"formBasicPasswordConfirm",children:[i(g.Label,{children:"Password Confirm"}),i(g.Control,{type:"password",placeholder:"Password Confirm",...u("passwordConfirm"),isInvalid:m.passwordConfirm&&!!r.passwordConfirm,isValid:m.passwordConfirm&&!r.passwordConfirm}),i(g.Control.Feedback,{type:"invalid",children:r.passwordConfirm})]}),i(C,{variant:"primary",type:"submit",disabled:v,children:"Submit"}),c?n("p",{children:["Already registered? ",i(J,{to:"/login",children:"Login"})]}):n("p",{children:["Not registered? ",i(J,{to:"/register",children:"Register"})]})]})})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Et(){return i(f.exports.Suspense,{fallback:i(H,{}),children:n(X,{children:[i(T,{path:"/register",element:i(Q,{})}),i(T,{path:"/login",element:i(Q,{})}),i(T,{path:"*",element:i(Z,{replace:!0,to:"/login"})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function Dt(){const{userId:e,setAuth:t}=pe(),{setItems:s}=D(),[o,a]=f.exports.useState(!0),{setShoppingLists:c}=O(),{setActiveShoppingList:l}=_(),{setNotification:d}=x();return f.exports.useEffect(()=>{if(e)return a(!1);a(!0),Mt().then(h=>{var v,u;if(!h)return;const{userData:r,items:m,activeList:b}=h;t({id:(v=r._id)!=null?v:"",email:(u=r.email)!=null?u:""}),s(m),l(b),c(r.shopping_lists)}).catch(h=>{d({message:h.message,variant:"danger"})}).finally(()=>a(!1))},[e]),o?i(H,{}):i(Re,{children:n(Ge,{fallback:i(Lt,{message:"Something Went Wrong"}),children:[i(jt,{}),e?i(Nt,{}):i(Be,{children:i(Et,{})})]})})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const Ot=document.getElementById("root"),Pt=ze(Ot);Pt.render(i(f.exports.StrictMode,{children:i(Ve,{children:i(Dt,{})})}));export{H as T,L as a,D as b,ut as c,de as d,Rt as e,re as f,Ye as g,O as h,A as i,_ as u};
