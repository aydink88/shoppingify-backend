import{c as n,j as t,Y as v,C as g,Z as x,o as C,r as i,p as T,_ as A,q as M,L as y,$ as j,S as k}from"./vendor.23ce1301.js";import{u as E,a as I,b as S,c as N,g as L,T as _}from"./index.8443604d.js";import{u as B}from"./useSafeDispatch.606095a5.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};function D({itemWithCat:e,onClick:s}){const{addItemToActiveShoppingList:u}=E(),{setSidebarMode:o}=I(),l=a=>h=>{h.stopPropagation(),u(a),o("EDIT_AMOUNTS")};return n("div",{className:"my-5","data-testid":"itemlist",children:[t("h5",{className:"fw-bold",children:e[0]}),t(v,{xs:2,lg:3,xl:4,className:"g-4",children:e[1].map(a=>t(g,{children:t(x,{"data-testid":"list-item-card",className:"fw-bold clickable zoom-on-hover",onClick:s?s(a):()=>{},children:t(x.Body,{className:"px-2 py-2 fs-6",children:n("div",{className:"d-flex align-items-center justify-content-between",children:[a.name,t(C,{role:"button",className:"fs-4 add_item-btn",onClick:l(a)})]})})})},a._id))})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};function H(){const{findItemsByName:e}=S(),{setSelectedItem:s}=N(),{setSidebarMode:u}=I(),[o,l]=i.exports.useState(""),[a,h]=i.exports.useState([]),m=i.exports.useRef(null),d=i.exports.useRef(),f=()=>{const c=e(o,5);h(c)};i.exports.useEffect(()=>(d.current&&clearTimeout(d.current),o?d.current=setTimeout(()=>{f()},500):p(),()=>clearTimeout(d.current)),[o]);const r=c=>()=>{s(c),u("SHOW_ITEM"),p()},p=()=>{l(""),h([])},w=c=>{var b;c.code==="Escape"&&(p(),(b=m.current)==null||b.blur())};return n("div",{className:"position-relative",children:[n(T,{className:"search-label",children:[t(T.Text,{children:t(A,{})}),t(M,{ref:m,type:"text",className:"search-input",placeholder:"search items",value:o,onChange:c=>l(c.target.value),onBlur:p,onKeyDown:w})]}),t("div",{className:"position-absolute w-100 text-center zindex-1",children:t(y,{children:a.map(c=>t(y.Item,{"data-testid":"search-result",action:!0,onClick:r(c),children:t("span",{className:"fs-5",children:c.name})},c._id))})})]})}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};function G(){const{itemsGroupedByCategory:e}=S(),{setItems:s}=S(),{setSelectedItem:u}=N(),{setSidebarMode:o}=I(),[l,a]=i.exports.useState(!0),h=B(a),m=j();i.exports.useEffect(()=>{e.length?a(!1):L().then(r=>{s(r)}).catch(r=>m(r)).finally(()=>h(!1))},[]);const d=r=>()=>{u(r),o("SHOW_ITEM")},f=window.innerWidth<992;return l?t(_,{}):n("div",{className:"p-3",children:[n(k,{direction:f?"vertical":"horizontal",gap:2,children:[t(g,{children:n("h4",{children:[n("span",{className:"text-primary",children:[t("strong",{children:"Shoppingify"})," "]})," ","allows you take your shopping list wherever you go"]})}),t(g,{children:t(H,{})})]}),e.map(r=>t(D,{itemWithCat:r,onClick:d},r[0]))]})}export{G as default};
